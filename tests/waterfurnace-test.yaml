# CI compilation test â€” exercises ALL entity code paths.
# Ensures every Python to_code() block and C++ setter compiles correctly.
# Does NOT require secrets, WiFi, or real hardware.

esphome:
  name: waterfurnace-test
  friendly_name: "WaterFurnace Test"

esp32:
  board: esp32dev
  framework:
    type: arduino

logger:
  level: DEBUG
  baud_rate: 0

# Minimal networking stub so ESPHome is happy
wifi:
  ssid: "test_ssid"
  password: "test_password"
  manual_ip:
    static_ip: 192.168.1.100
    gateway: 192.168.1.1
    subnet: 255.255.255.0

api:
  encryption:
    key: "1Mxas/2HUGgdfNx8it2J8fw2JvHmrvHz4YE7LLOpdJE="
  custom_services: true

ota:
  - platform: esphome

external_components:
  - source:
      type: local
      path: ../components

uart:
  id: mod_bus
  tx_pin: GPIO17
  rx_pin: GPIO16
  baud_rate: 19200
  parity: EVEN
  stop_bits: 1

waterfurnace_aurora:
  id: aurora
  uart_id: mod_bus
  address: 1
  update_interval: 10s
  flow_control_pin: GPIO4
  connected:
    name: "Test Heat Pump Connected"
  connected_timeout: 30s

# --- Water Heater (DHW) ---
water_heater:
  - platform: waterfurnace_aurora
    id: aurora_dhw
    name: "Test Domestic Hot Water"
    aurora_id: aurora

# --- Climate (main thermostat) ---
climate:
  - platform: waterfurnace_aurora
    id: aurora_thermostat
    name: "Test Heat Pump"
    aurora_id: aurora

# --- Switch ---
switch:
  - platform: waterfurnace_aurora
    aurora_id: aurora
    dhw_enabled:
      name: "Test DHW Enabled"

# --- Number controls ---
number:
  - platform: waterfurnace_aurora
    aurora_id: aurora
    dhw_setpoint:
      name: "Test DHW Setpoint"
    blower_only_speed:
      name: "Test Indoor Blower Only Speed"
    lo_compressor_speed:
      name: "Test Lo Compressor Speed"
    hi_compressor_speed:
      name: "Test Hi Compressor Speed"
    aux_heat_speed:
      name: "Test Aux Electric Heat Speed"
    pump_min_speed:
      name: "Test Loop Pump Min Speed"
    pump_max_speed:
      name: "Test Loop Pump Max Speed"
    fan_intermittent_on:
      name: "Test Fan On Time"
    fan_intermittent_off:
      name: "Test Fan Off Time"
    humidification_target:
      name: "Test Humidification Setpoint"
    dehumidification_target:
      name: "Test Dehumidification Setpoint"

# --- ALL Sensors (complete coverage) ---
sensor:
  - platform: waterfurnace_aurora
    aurora_id: aurora
    entering_air_temperature:
      name: "Test Return Air Temp"
    leaving_air_temperature:
      name: "Test Supply Air Temp"
    ambient_temperature:
      name: "Test Ambient Temp"
    outdoor_temperature:
      name: "Test Outdoor Temp"
    entering_water_temperature:
      name: "Test Entering Water Temp"
    leaving_water_temperature:
      name: "Test Leaving Water Temp"
    heating_setpoint:
      name: "Test Heating Setpoint"
    cooling_setpoint:
      name: "Test Cooling Setpoint"
    dhw_temperature:
      name: "Test DHW Temp"
    dhw_setpoint:
      name: "Test DHW Setpoint Sensor"
    superheat_temperature:
      name: "Test Superheat Temp"
    humidity:
      name: "Test Humidity"
    compressor_speed:
      name: "Test Compressor Speed"
    discharge_pressure:
      name: "Test Discharge Pressure"
    suction_pressure:
      name: "Test Suction Pressure"
    loop_pressure:
      name: "Test Loop Pressure"
    eev_open_percentage:
      name: "Test EEV Open"
    line_voltage:
      name: "Test Line Voltage"
    total_watts:
      name: "Test Total Unit Power"
    compressor_watts:
      name: "Test Compressor Power"
    blower_watts:
      name: "Test Indoor Blower Power"
    aux_heat_watts:
      name: "Test Aux Electric Heat Power"
    pump_watts:
      name: "Test Loop Pump Power"
    waterflow:
      name: "Test Water Flow"
    fault_code:
      name: "Test Fault Code"
    lockout_fault_code:
      name: "Test Lockout Fault Code"
    fp1_temperature:
      name: "Test FP1 Temp"
    fp2_temperature:
      name: "Test FP2 Temp"
    line_voltage_setting:
      name: "Test Line Voltage Setting"
    anti_short_cycle:
      name: "Test Anti Short Cycle"
    compressor_desired_speed:
      name: "Test Compressor Desired Speed"
    discharge_temperature:
      name: "Test Discharge Temp"
    suction_temperature:
      name: "Test Suction Temp"
    vs_drive_temperature:
      name: "Test VS Drive Temp"
    vs_inverter_temperature:
      name: "Test VS Inverter Temp"
    blower_speed:
      name: "Test Indoor Blower Speed"
    blower_only_speed:
      name: "Test Indoor Blower Only Speed Sensor"
    lo_compressor_speed:
      name: "Test Lo Compressor Speed Sensor"
    hi_compressor_speed:
      name: "Test Hi Compressor Speed Sensor"
    aux_heat_speed:
      name: "Test Aux Electric Heat Speed Sensor"
    pump_speed:
      name: "Test Loop Pump Speed"
    pump_min_speed:
      name: "Test Loop Pump Min Speed Sensor"
    pump_max_speed:
      name: "Test Loop Pump Max Speed Sensor"
    heating_liquid_line_temperature:
      name: "Test Heating Liquid Line Temp"
    saturated_condenser_temperature:
      name: "Test Saturated Condenser Temp"
    subcool_temperature:
      name: "Test Subcool Temp"
    heat_of_extraction:
      name: "Test Heat of Extraction"
    heat_of_rejection:
      name: "Test Heat of Rejection"
    vs_fan_speed:
      name: "Test VS Fan Speed"
    vs_ambient_temperature:
      name: "Test VS Ambient Temp"
    vs_compressor_watts:
      name: "Test VS Compressor Watts"
    saturated_evaporator_discharge_temperature:
      name: "Test Sat Evap Discharge Temp"
    aux_heat_stage:
      name: "Test Aux Electric Heat Stage"
    humidification_target:
      name: "Test Humidification Setpoint"
    dehumidification_target:
      name: "Test Dehumidification Setpoint"
    iz2_compressor_speed:
      name: "Test IZ2 Compressor Speed"
    iz2_blower_speed:
      name: "Test IZ2 Blower Speed"
    cop:
      name: "Test COP"
    water_delta_t:
      name: "Test Water Delta-T"
    approach_temperature:
      name: "Test Approach Temp"

# --- ALL Binary sensors ---
binary_sensor:
  - platform: waterfurnace_aurora
    aurora_id: aurora
    compressor_running:
      name: "Test Compressor Running"
    blower_running:
      name: "Test Indoor Blower Running"
    aux_heat_running:
      name: "Test Aux Electric Heat Running"
    dhw_running:
      name: "Test DHW Running"
    loop_pump_running:
      name: "Test Loop Pump Running"
    lockout:
      name: "Test Lockout"
    humidifier_running:
      name: "Test Humidifier Running"
    dehumidifier_running:
      name: "Test Dehumidifier Running"
    low_pressure_switch:
      name: "Test LPS"
    high_pressure_switch:
      name: "Test HPS"
    emergency_shutdown:
      name: "Test Emergency Shutdown"
    load_shed:
      name: "Test Load Shed"

# --- ALL Text sensors ---
text_sensor:
  - platform: waterfurnace_aurora
    aurora_id: aurora
    current_mode:
      name: "Test Current Mode"
    hvac_mode:
      name: "Test HVAC Mode"
    fan_mode:
      name: "Test Fan Mode"
    fault_description:
      name: "Test Fault Description"
    model_number:
      name: "Test Model Number"
    serial_number:
      name: "Test Serial Number"
    fault_history:
      name: "Test Fault History"
    vs_derate:
      name: "Test VS Derate"
    vs_safe_mode:
      name: "Test VS Safe Mode"
    vs_alarm:
      name: "Test VS Alarm"
    axb_inputs:
      name: "Test AXB Inputs"
    humidifier_mode:
      name: "Test Humidifier Mode"
    dehumidifier_mode:
      name: "Test Dehumidifier Mode"
    pump_type:
      name: "Test Pump Type"
    lockout_fault_description:
      name: "Test Lockout Fault Description"
    outputs_at_lockout:
      name: "Test Outputs at Lockout"
    inputs_at_lockout:
      name: "Test Inputs at Lockout"

# --- Buttons ---
button:
  - platform: waterfurnace_aurora
    aurora_id: aurora
    clear_fault_history:
      name: "Test Clear Fault History"
